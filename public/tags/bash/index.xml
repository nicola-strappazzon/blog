<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bash on Nicola Strappazzon</title>
    <link>https://nicola.strappazzon.me/tags/bash/</link>
    <description>Recent content in Bash on Nicola Strappazzon</description>
    <generator>Hugo</generator>
    <language>es-es</language>
    <copyright>Â© 2025 Nicola Strappazzon</copyright>
    <lastBuildDate>Fri, 09 May 2025 10:56:29 +0200</lastBuildDate>
    <atom:link href="https://nicola.strappazzon.me/tags/bash/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>jq</title>
      <link>https://nicola.strappazzon.me/wiki/jq/</link>
      <pubDate>Fri, 09 May 2025 10:56:29 +0200</pubDate>
      <guid>https://nicola.strappazzon.me/wiki/jq/</guid>
      <description>&lt;h1 id=&#34;wiki--jq&#34;&gt;Wiki / JQ&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://jqlang.org&#34;&gt;jq&lt;/a&gt; es una tool que permite manipular el JSON en la terminal.&lt;/p&gt;&#xA;&lt;h2 id=&#34;imprimir-un-campo&#34;&gt;Imprimir un campo&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jq -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.Query&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;imprimir-un-campo-dentro-una-lista&#34;&gt;Imprimir un campo dentro una lista&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jq -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.CacheClusters[].CacheNodeType&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;filtrar&#34;&gt;Filtrar&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jq -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;select( .duration != null )&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;convertir-a-csv&#34;&gt;Convertir a CSV&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jq -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;select( .duration != null ) | [.duration,.status, .url] | @csv&amp;#39;&lt;/span&gt; &amp;gt; log.csv&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>MySQL commands for DBA</title>
      <link>https://nicola.strappazzon.me/wiki/mysql/commands/</link>
      <pubDate>Fri, 09 May 2025 10:56:29 +0200</pubDate>
      <guid>https://nicola.strappazzon.me/wiki/mysql/commands/</guid>
      <description>&lt;h1 id=&#34;mysql-commands-for-dba&#34;&gt;MySQL commands for DBA&lt;/h1&gt;&#xA;&lt;h2 id=&#34;show-progress-of-load-script&#34;&gt;Show progress of load script&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pv -e -p -t updates.sql | mysql -h 127.0.0.1 -u $MYSQL_USER -p$MYSQL_PASSWORD --batch --silent&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;kill-all-mysql-process&#34;&gt;Kill all MySQL process&lt;/h2&gt;&#xA;&lt;p&gt;The command &lt;code&gt;m&lt;/code&gt; is a alias from &lt;code&gt;mysql -h 127.0.0.1 -u $MYSQL_USER -p$MYSQL_PASSWORD&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;m -se &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SHOW PROCESSLIST&amp;#34;&lt;/span&gt; | awk &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;{print &amp;#34;KILL &amp;#34;$1&amp;#34;;&amp;#34;}&amp;#39;&lt;/span&gt; | m&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For RDS use the follow commands, and in this example kill the all sleep process:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;m -se &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SHOW PROCESSLIST&amp;#34;&lt;/span&gt; | grep Sleep | awk &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;{print &amp;#34;CALL mysql.rds_kill(&amp;#34;$1&amp;#34;);&amp;#34;}&amp;#39;&lt;/span&gt; | m -f&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;dump-users-and-privileges&#34;&gt;Dump users and privileges&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mysql -u $MYSQL_USER -p$MYSQL_PASSWORD -BNe &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SELECT DISTINCT CONCAT(&amp;#39;SHOW GRANTS FOR &amp;#39;&amp;#39;&amp;#39;, user, &amp;#39;&amp;#39;&amp;#39;@&amp;#39;&amp;#39;&amp;#39;, host, &amp;#39;&amp;#39;&amp;#39;;&amp;#39;) AS query FROM mysql.user&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;| &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;mysql -u $MYSQL_USER -p$MYSQL_PASSWORD &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;| &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;sed &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/\(GRANT .*\)/\1;/;s/^\(Grants for .*\)/--\1--/;//{x;p;x;}&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;modify-many-tables-in-many-databases&#34;&gt;Modify many tables in many databases&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mysql -u $MYSQL_USER -p$MYSQL_PASSWORD -Bse &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SELECT DISTINCT CONCAT(\&amp;#34;ALTER TABLE \&amp;#34;, TABLE_SCHEMA,\&amp;#34;.foo ADD created_at datetime NOT NULL;\&amp;#34;) AS sql_text FROM information_schema.TABLES WHERE TABLE_TYPE = &amp;#39;BASE TABLE&amp;#39; AND TABLE_SCHEMA LIKE &amp;#39;site\_%&amp;#39; AND TABLE_NAME = &amp;#39;foo&amp;#39;;&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;|&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mysql -u $MYSQL_USER -p$MYSQL_PASSWORD&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
  </channel>
</rss>
